# **Deploying the Frontend with Kubernetes**

### **1. Goal**

Deploy the React frontend application on Kubernetes so users can access it publiclyâ€”just like the backend services.

---

# ğŸš€ **2. Preparing the Frontend for Deployment**

### **Docker Setup**

* The frontend already has a **multi-stage Dockerfile**:

  * First stage: builds the React app
  * Second stage: serves it using **NGINX**
* You previously tested it locally using `docker run`, but for Kubernetes you must **push the image to Docker Hub**.

### **Push the Image**

1. Create a **Docker Hub repository** named:
   `kub-demo-frontend`
2. Push your local image:

   ```bash
   docker push nidhalhaamdii/kub-demo-frontend
   ```

   (Replace with your own Docker Hub username.)

---

# ğŸ§© **3. Creating the Frontend Deployment**

Create a new file: **frontend-deployment.yaml**

You copy an existing deployment (like users or tasks) and modify:

* `name: frontend-deployment`
* `labels: app: frontend`
* container name: `frontend`
* image: `nidhalhaamdii/kub-demo-frontend`
* remove environment variables (frontend doesnâ€™t need them)

This produces a **simple deployment** that runs the NGINX server.

---

# ğŸŒ **4. Exposing the Frontend to the World**

### Create **frontend-service.yaml**

Copy from `users-service` and modify:

* `name: frontend-service`
* `selector: app: frontend`
* **type: LoadBalancer**

  * required so Minikube (or a real cloud provider) exposes a public URL
* `ports:`

  * port **80** â†’ targetPort **80**

This makes the React app reachable from outside the cluster.

---

# ğŸ“¦ **5. Apply Deployment + Service**

Inside the Kubernetes folder:

```bash
kubectl apply -f frontend-deployment.yaml
kubectl apply -f frontend-service.yaml
```

Check status:

```bash
kubectl get pods
kubectl get services
```

---

# ğŸŒ **6. Accessing the Application**

Expose the service through Minikube:

```bash
minikube service frontend-service
```

This opens a browser with the frontend URL.

The app should work normally (e.g., adding tasks).

---

# âš ï¸ **7. Hardcoded API URL Problem**

Inside `src/App.js`, the frontend currently has a hard-coded URL:

```js
fetch("http://<tasks-service-ip>/tasks");
```

* It *works*, but itâ€™s not ideal.
* In real cloud deployments, the IP is usually stable or mapped to a domainâ€”so hardcoding is somewhat acceptable.
* But we are about to show a **better solution** to avoid hardcoding service addresses.

This will be the â€œtrickâ€ introduced in the next lecture.

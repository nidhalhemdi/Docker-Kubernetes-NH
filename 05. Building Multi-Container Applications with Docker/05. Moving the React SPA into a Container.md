**Moving the React SPA into a Container**

## **ğŸ¯ Goal **

Dockerize the **frontend React application** by building a Docker image that:

* installs React project dependencies,
* runs the *development server* with `npm start`,
* exposes port **3000**,
* runs properly inside a container.

---

# ğŸ§  **Key Concepts**

### **1. React apps need Node**

React projects (created via `create-react-app` or similar) are NOT Node servers, but:

* they use **Node** to run the dev server,
* Node is also required to build & bundle the frontend.

ğŸ‘‰ **So the Dockerfile must use a Node base image.**

---

### **2. The React dev server stops unless the container is interactive**

React's dev server expects an *interactive terminal*.
If you donâ€™t start the container with `-it`, the server stops immediately.

---

### **3. Ports**

React dev server runs on **port 3000** by default â†’ expose & map it.

---

# ğŸ§± **Dockerfile for React (Frontend)**

Place this in `/frontend/Dockerfile`:

```dockerfile
FROM node:18

WORKDIR /app

COPY package.json .

RUN npm install

COPY . .

EXPOSE 3000

CMD ["npm", "start"]
```

---

# ğŸ› ï¸ **Build & Run Commands**

### **1. Build the React image**

```sh
docker build -t goals-react .
```

### **2. Run the container (IMPORTANT: needs -it)**

```sh
docker run --name goals-frontend --rm -it -p 3000:3000 goals-react
```

### Explanation:

* `--rm` â†’ auto-delete when stopped
* `-it` â†’ keeps dev server alive
* `-p 3000:3000` â†’ exposes app on your machine

---

# ğŸ **Why the container exited before?**

Because React dev server quits immediately if no interactive terminal is attached.
Fix: **add `-it`**.

---

# ğŸŒ **Communication Between Containers**

At this point:

* backend, mongodb, and frontend can talk BUT only via **localhost and published ports**.
* Next step is better: **put them all in the same Docker network**.

Once in a shared network:

* containers talk via **container names** (e.g., `http://goals-backend:80`).

---

# ğŸ§¹ **Stopping all containers**

React container (interactive) â†’ stop with:

* `CTRL + C`

Backend + MongoDB (if using `--rm`):

* stop them normally:

```sh
docker stop <container-name>
```

---

# ğŸ“¦ **End Result of This Lecture**

You now have:
âœ” Backend in its own container
âœ” MongoDB in its own container
âœ” React frontend in its own container
âœ” All manually run
âœ” Ready to be polished with networks + volumes next

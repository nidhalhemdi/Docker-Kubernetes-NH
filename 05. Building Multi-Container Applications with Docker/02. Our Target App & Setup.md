# **Our Target App & Setup**

## **ğŸ§± The App We Will Dockerize (3 Services)**

### **1. MongoDB (Database)**

* Stores all user goals.
* Must **persist data** â†’ data must *not* disappear when the container is rebuilt/restarted.
* Will require:

  * A **volume** (to persist DB files)
  * Optional: **authentication** (Mongo official image supports username + password via environment variables)

### **2. Node.js Backend (REST API)**

* Built with Node + Express.
* Exposes **JSON REST endpoints**, no HTML.
* Responsibilities:

  * Receive requests from frontend
  * Add / get / delete goals
  * Communicate with MongoDB
  * Create **log files** â†’ must persist â†’ use a **volume**
* Runs on its **own port** (in the example, port 80).
* Needs **live reload during development** â†’ use **nodemon** and **bind-mount source code**.

### **3. React Frontend (SPA)**

* A **standalone** React app (runs in the browser).
* Built with React + its dev server (`npm start`).
* Speaks to the backend API via HTTP.
* Runs on **localhost:3000** during development.
* Also needs **live reload** â†’ bind-mount source code.

---

## **ğŸŒ How the Services Communicate**

* **Frontend â†’ Backend**
  Sends HTTP requests (e.g., GET/POST) to the Node API.
* **Backend â†’ Database**
  Sends queries to MongoDB.
* **Frontend NEVER talks directly to the database.**

Typical architecture:

```
React App â†’ Node.js API â†’ MongoDB
```

---

## **ğŸ’» Running the App Without Docker**

### Backend

```bash
cd backend
npm install
node app.js
```

Requires a running MongoDB instance installed on the host machine.

### Frontend

```bash
cd frontend
npm install
npm start
```

Two **separate servers** run:

* React Dev Server â†’ port 3000
* Node API â†’ port 80
  Theyâ€™re detached â†’ two independent web servers.

---

## **ğŸ“¦ What Changes When We Dockerize?**

We must handle:

### **âœ” Database (MongoDB container)**

* Require **persistent data** â†’ use **Docker volumes**.
* Should support **username & password** â†’ environment variables like:

  * `MONGO_INITDB_ROOT_USERNAME`
  * `MONGO_INITDB_ROOT_PASSWORD`

### **âœ” Backend (Node.js container)**

* Persist **log files** â†’ volume for `/logs`.
* Watch for code changes â†’ use **nodemon** and **bind mounts**.
* Ensure container always uses the **latest source code** during development without rebuild.

### **âœ” Frontend (React container)**

* Should reflect live code updates â†’ bind mounts.
* Should run its own dev server inside Docker.

---

## **âš  Key Requirements Before Dockerizing**

1. **Persistence**

   * MongoDB data â†’ volume
   * Node logs â†’ volume

2. **Live Development**

   * Bind mount source code for both backend & frontend
   * Use tools like **nodemon** (backend)

3. **Networking**

   * Containers must reach each other using **container names** (Docker network)

4. **Security (Optional)**

   * Add MongoDB credentials via env variables.
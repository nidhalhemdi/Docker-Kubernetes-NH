# **Different Ways of Running Commands in Containers**

---

# ğŸ¯ **What This Lecture Teaches**

This lecture introduces **three important ways to execute commands in containers**:

1. **Running a container interactively**
2. **Executing commands in an already running container (`docker exec`)**
3. **Overriding the default command of an image (`docker run <image> <command>`)**

These are essential building blocks for working with utility containers.

---

# ğŸ§© **1. Running a Container Interactively (`docker run -it`)**

Example:

```bash
docker run -it node
```

What happens:

* Node image starts its default command â†’ **Node REPL**
* You can type JavaScript directly (acts like a calculator)
* To exit: **Ctrl + C twice**

Key notes:

* Without `-it`, the container starts then immediately stops
  because Node expects input but receives none.

---

# ğŸ—‘ Stopped Containers

Check:

```bash
docker ps -a
```

Remove all stopped containers:

```bash
docker container prune
```

---

# ğŸ§© **2. Starting a Container in Detached + Interactive Mode**

```bash
docker run -dit --name mynode node
```

Meaning:

* `-d` â†’ detached (runs in background)
* `-i` â†’ keeps STDIN open so Node REPL stays alive

Result:

* Container is *running* in the background
* It waits for input but you're not attached to it

---

# ğŸ§© **3. Executing Commands in a Running Container (`docker exec`)**

`docker exec` lets you run commands **inside an already running container**, without stopping its main process.

Example (will NOT work interactively):

```bash
docker exec <container-name> npm init
```

It fails because `npm init` requires interactive input.

Correct version:

```bash
docker exec -it <container-name> npm init
```

You can now:

* Answer prompts
* Create a Node project inside the container
  (even though Node is *not installed on your host!*)

âš  **But this is still not useful yet**
because the project is created *inside the container filesystem* and you cannot access it on your host.

This will be fixed later using **bind mounts**.

---

# ğŸ§© **4. Overriding the Default Command of an Image**

Every image has a default command (from `CMD` or `ENTRYPOINT` in the Dockerfile).

For the Node image:

* default command = `node`
  â†’ starts Node REPL

You can override the default command by appending a new one:

```bash
docker run -it node npm init
```

This:

* Skips the REPL
* Runs `npm init` instead
* Prompts questions
* Finishes
* Container stops (because `npm init` completes)

This is another way to use containers as **command runners**.

---

# ğŸ§  **When to Use What**

| Method                              | Purpose                                                                          |
| ----------------------------------- | -------------------------------------------------------------------------------- |
| `docker run -it node`               | Use the Node REPL, run JS interactively                                          |
| `docker exec -it <container> <cmd>` | Run additional commands inside a running container (view logs, debug, run tools) |
| `docker run -it node npm init`      | Use the container **only** to run a specific command                             |

---

# ğŸ“ **Commands to Remember**

### **Start Node REPL interactively**

```bash
docker run -it node
```

### **Run a detached container**

```bash
docker run -dit --name mynode node
```

### **Execute a command inside running container**

```bash
docker exec -it mynode npm init
```

### **Override default command**

```bash
docker run -it node npm init
```

### **Stop a container**

```bash
docker stop mynode
```

### **List stopped containers**

```bash
docker ps -a
```

### **Delete stopped containers**

```bash
docker container prune
```

---

# â­ Key Takeaways

* **`docker exec`** = run commands *inside* a running container
* **`docker run <image> <command>`** = override default CMD
* **Interactive commands (`npm init`, REPLs, shells)** require `-it`
* Utility containers rely heavily on these patterns

# **Building & Understanding the Demo App **

- Demonstrating how to **dockerize the demo Node.js feedback app** and highlights an important concept:

ğŸ‘‰ **The containerâ€™s filesystem is isolated from your host machine**.

---

# ğŸ³ **Dockerizing the Demo App â€” Steps & Commands**

## **1. Create the Dockerfile**

### âœ… **Final Dockerfile**

```Dockerfile
FROM node:14
WORKDIR /app

COPY package.json .
RUN npm install

COPY . .

EXPOSE 80
CMD ["node", "server.js"]
```

### **What each instruction does**

* `FROM node:14` â†’ base image
* `WORKDIR /app` â†’ sets working folder inside the image
* `COPY package.json .` â†’ copies dependencies first (allows caching)
* `RUN npm install` â†’ install Node packages
* `COPY . .` â†’ copy the rest of the project
* `EXPOSE 80` â†’ app listens on port 80 inside container
* `CMD ["node","server.js"]` â†’ run the app

---

## **2. Build the image**

```bash
docker build -t feedback-node .
```

(Uses the default `latest` tag.)

---

## **3. Run a container**

```bash
docker run -d \
  -p 3000:80 \
  --name feedback-app \
  --rm \
  feedback-node
```

Explanation:

* `-d` â†’ detached mode
* `-p 3000:80` â†’ expose container port 80 to localhost:3000
* `--name` â†’ give container a readable name
* `--rm` â†’ auto-remove container when stopped

---

# ğŸŒ **Testing the App**

Visit:

```
http://localhost:3000
```

Submit feedback:

* Title (used as filename â†’ must be simple, lowercase safe)
* Text content

Stored result is available at:

```
/feedback/<title>.txt
```

Example:

```
/feedback/awesome.txt
```

This is served by the Node.js app.

---

# ğŸ“Œ **Key Concept Demonstrated Here: Container Filesystem Isolation**

### â— Very important:

Files created **inside the container** DO NOT appear on your host machine.

Why?

* When building the image, Docker copies a **snapshot** of your project.
* That snapshot becomes the image filesystem.
* The container adds a **read-write layer**, isolated from your OS.
* There is **no live sync** between:

  * host folder
  * container filesystem

This is why:

* You *do not see* `feedback/awesome.txt` on your host
* But you *can* access it from inside the running container or the web app

---

# ğŸ” Submitting Feedback Twice

If you submit the *same title* again:

* The app checks `/feedback/<title>.txt`
* If it exists â†’ shows **"Exists already" page**
* File is **not overwritten**

This matches the app logic:

1. Write temp file to `/temp`
2. Check `/feedback`
3. Copy only if it doesnâ€™t exist

---

# ğŸ¯ **What You Should Take Away**

* We now have a **fully dockerized Node.js app**.
* The app writes **temporary** and **permanent data** inside the container.
* Those files **disappear** if the container stops â†’ because they live inside the container layer.
* This is exactly why Docker **volumes** are needed.
* Next we will solve this problem using:

  * **Bind mounts**
  * **Named volumes**
  * **Anonymous volumes**

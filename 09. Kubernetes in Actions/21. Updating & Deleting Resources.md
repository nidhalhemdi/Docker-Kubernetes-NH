# Updating & Deleting Kubernetes Resources (Declarative Approach)

The declarative workflow becomes powerful when you want to **update** or **delete** Kubernetes resources. Instead of running many imperative commands, you simply edit your YAML files and reapply them.

---

# 1ï¸âƒ£ Updating Resources (Declaratively)

To update anything in Kubernetes when using YAML files:

### âœ” Step 1: Modify the YAML

Change whatever you want:

* number of replicas
* container image
* labels
* ports
* etc.

Example â€” update replica count:

```yaml
spec:
  replicas: 3
```

Example â€” change the image:

```yaml
image: my-app:v2
```

### âœ” Step 2: Apply the file again

```
kubectl apply -f deployment.yaml
```

Kubernetes compares your new desired state with the current cluster state and updates **only what changed**.

### âœ¨ Effects:

* If replicas increase â†’ Kubernetes creates more Pods.
* If replicas decrease â†’ Kubernetes terminates Pods.
* If image changes â†’ Kubernetes triggers a rolling update.

You never have to retype long commands like:

```
kubectl set image ...
kubectl scale ...
```

---

# 2ï¸âƒ£ Example:

### Scale up:

Edit replicas â†’ 3
Apply â†’ cluster creates new pods
`kubectl get pods` â†’ now shows 3 pods.

### Scale down:

Change replicas â†’ 1
Apply â†’ 2 pods terminate.

### Change the image:

Edit YAML, then:

```
kubectl apply -f deployment.yaml
```

Reload the browser â†’ new version is running.

---

# 3ï¸âƒ£ Why Declarative Updating Is Better

* No long commands to remember
* Only the **changed** part is applied
* Less error-prone
* Configuration files can be **version controlled** (Git)
* Easy to collaborate (teammates read YAML, no guessing)

---

# 4ï¸âƒ£ Deleting Resources (Declarative or Imperative)

You have two options to delete a resource:

---

## ğŸ…° Imperative Delete (by name)

Even if you created it declaratively, you can still delete it imperatively:

```
kubectl delete deployment my-deployment
kubectl delete service backend
```

---

## ğŸ…± Declarative Delete (recommended for YAML workflow)

Delete using the file that created the resource:

```
kubectl delete -f deployment.yaml
kubectl delete -f service.yaml
```

This **does NOT delete the file itself**, only the resources defined inside it.

You can delete multiple resources at once:

```
kubectl delete -f deployment.yaml -f service.yaml
```

or

```
kubectl delete -f deployment.yaml,service.yaml
```

---

# 5ï¸âƒ£ Key Takeaways

* **Updating:** Edit YAML â†’ apply â†’ Kubernetes updates only what changed
* **Deleting:** Use `kubectl delete -f file.yaml` or delete by resource name
* Declarative workflow is easier, safer, version-controllable, and the industry standard

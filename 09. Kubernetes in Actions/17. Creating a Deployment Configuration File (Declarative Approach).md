# **Creating a Deployment Configuration File (Declarative Approach)**

In this lecture, you learn how to replace the imperative `kubectl` commands with a **declarative YAML file** that defines a Kubernetes Deployment.

---

## ‚úÖ **1. Clean Up Your Cluster Before Starting**

Before creating the YAML file, make sure the cluster is empty:

* `kubectl get deployments` ‚Üí should show nothing
* `kubectl get pods` ‚Üí should show nothing
* `kubectl get services` ‚Üí only the default Kubernetes service should remain
* If something exists, delete it:
  `kubectl delete deployment <name>`

Ensure **minikube is running**, otherwise the commands would fail.

---

## ‚úÖ **2. Create a Deployment YAML File**

You add a new file (e.g., `deployment.yaml` ‚Äî filename is arbitrary, only extension matters).

This file will contain all configuration for your Deployment.

---

## ‚≠ê **3. YAML Structure: The Required Building Blocks**

Every Kubernetes resource definition file must include:

### **(1) `apiVersion`**

* Specifies which Kubernetes API version this resource uses.
* For Deployments, the current version is:

  ```
  apiVersion: apps/v1
  ```
* You can find API versions via:

  * Kubernetes docs
  * Searching examples online

---

### **(2) `kind`**

* Defines what Kubernetes object you're creating.
* Since you're creating a Deployment:

  ```
  kind: Deployment
  ```
* This tells Kubernetes what type of object to create (file name alone doesn‚Äôt matter).

---

### **(3) `metadata`**

Includes identification information for the object, most importantly the **name**:

```
metadata:
  name: second-app-deployment
```

* The name is **fully up to you**.
* This serves the same purpose as specifying `--name` when using `kubectl create deployment` in the imperative approach.
* Metadata **can** contain much more (labels, annotations, etc.), but for now only `name` is required.

---

### **(4) `spec`**

This is the *heart* of the deployment file.

* The **spec** (specification) defines **how the deployment should behave**:

  * Number of replicas
  * Pod template
  * Containers
  * Images
  * Update strategy
  * Etc.

The lecture ends right before filling in the contents of `spec`.

---

## üéØ **Key Insight**

Declarative YAML files allow you to define everything about your Kubernetes objects **once**, in a repeatable and version-controlled way.

Instead of running:

* `kubectl create deployment`
* `kubectl set image`
* `kubectl expose`
* etc.

‚Ä¶you simply run:

```
kubectl apply -f deployment.yaml
```

And Kubernetes makes sure the cluster matches your desired configuration.

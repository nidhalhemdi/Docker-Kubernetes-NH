# Multiple vs Single Kubernetes Config Files

Kubernetes allows you to define resources (Deployments, Services, etc.) declaratively using YAML files. One of the advantages is that you can organize these definition files however you prefer — **multiple files** or **a single merged file**.

This lecture explains how and why to combine multiple YAML resources into one file.

---

# 1️⃣ Why Multiple Files?

Keeping resources separate (e.g., `deployment.yaml` and `service.yaml`) has benefits:

* Clear structure — each file’s purpose is obvious
* Easier to find specific components
* Common in larger projects

However, sometimes resources are tightly related (like a Deployment + its Service). In such cases, you might prefer grouping.

---

# 2️⃣ Merging Resources into One File

You can place **multiple resource definitions in one YAML file**.
For example, create a file like:

```
master-deployment.yaml
```

and insert:

* the **Service** definition
* the **Deployment** definition

### ✔ How to separate multiple resources

Use:

```
---
```

Exactly **three dashes**, nothing more or less.

This YAML syntax means:
➡️ *“Start a new YAML document here.”*

You can put as many documents as you want in one file.

---

# 3️⃣ Recommended Ordering

When combining resources in one file:

### ✔ Best practice: Put the **Service BEFORE the Deployment**

Why?

* A Service uses a **selector** to find matching Pods.
* Even if Pods don’t exist yet, the Service will start watching.
* When the Deployment later creates Pods, the Service immediately picks them up.

Kubernetes processes resources **top → bottom** inside the file.

---

# 4️⃣ Important Concept: Resources Are “Living Objects”

A Kubernetes Service does NOT just match Pods once.

It continuously watches the cluster:

* If a new Pod appears that matches the selector → Service adds it
* If a Pod is removed → Service removes it
* This is why order doesn’t break anything, but placing the Service first is still cleaner.

---

# 5️⃣ Deleting the Old Resources (Before Merging)

If you previously deployed separate YAMLs, delete them:

```
kubectl delete -f deployment.yaml -f service.yaml
```

This removes:

* the Deployment
* the Service

(based on what each file defined)

---

# 6️⃣ Apply the Merged File

Now create everything at once:

```
kubectl apply -f master-deployment.yaml
```

Kubernetes will create:

* the Service (first)
* the Deployment
* the Pods

---

# 7️⃣ Accessing the App (Minikube)

Since this is a local environment:

```
minikube service backend
```

This opens or prints a URL for your exposed Service.

---

# 8️⃣ Summary

### ✔ You can keep YAMLs separate or merge them — both are valid

### ✔ Multiple resources in one YAML must be separated by `---`

### ✔ Service → Deployment is the preferred ordering

### ✔ Kubernetes resources continuously watch and adapt

### ✔ You can delete & reapply everything cleanly when reorganizing files
